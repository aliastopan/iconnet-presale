@using IConnet.Presale.Domain.Aggregates.Presales
@using IConnet.Presale.Application.Common.Interfaces.Services

@implements IDialogContentComponent<WorkPaper>

@inject IDateTimeService _dateTimeService

<FluentDialogHeader ShowDismiss="true">
    <FluentStack VerticalAlignment="VerticalAlignment.Center">
        <FluentIcon Value="@(new Icons.Regular.Size24.DocumentCheckmark())" />
        <FluentLabel Typo="Typography.PaneHeader">
            @Dialog.Instance.Parameters.Title
        </FluentLabel>
    </FluentStack>
</FluentDialogHeader>

    <div class="d-flex flex-row mb-3">
        <span class="px-1">Di-Import</span>
        <FluentBadge Appearance="Appearance.Accent">
            @(_dateTimeService.GetElapsedTime(Content.ApprovalOpportunity.ImportSignature.ActionDateTime).AsReadableString())
        </FluentBadge>
        <span class="px-1">yang lalu</span>
        <FluentBadge Appearance="Appearance.Accent">
            @Content.ApprovalOpportunity.ImportSignature.SignatureAlias
        </FluentBadge>
    </div>

    <FluentLabel Typo="Typography.H3">Data Permohonan</FluentLabel>
    <table>
        <thead>
            <tr>
                <th style="padding-right: 1rem;">ID PERMOHONAN</th>
                <td>@Content.ApprovalOpportunity.IdPermohonan</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">TGL PERMOHONAN</th>
                <td>@Content.ApprovalOpportunity.TglPermohonan</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">DURASI TIDAK LANJUT</th>
                <td>@_dateTimeService.GetElapsedTime(Content.ApprovalOpportunity.TglPermohonan).AsReadableString()</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">LAYANAN</th>
                <td>@Content.ApprovalOpportunity.Layanan</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">SUMBER PERMOHONAN</th>
                <td>@Content.ApprovalOpportunity.SumberPermohonan</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">STATUS PERMOHONAN</th>
                <td>@Content.ApprovalOpportunity.StatusPermohonan</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">JENIS PERMOHONAN</th>
                <td>@Content.ApprovalOpportunity.JenisPermohonan</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">SPLITTER</th>
                <td>@Content.ApprovalOpportunity.Splitter</td>
            </tr>
        </thead>
    </table>

    <FluentLabel Typo="Typography.H3">Data Pelanggan</FluentLabel>
    <table>
        <thead>
            <tr>
                <th style="padding-right: 1rem;">NAMA LENGKAP</th>
                <td>@Content.ApprovalOpportunity.Pemohon.NamaLengkap</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">ID PLN</th>
                <td>@Content.ApprovalOpportunity.Pemohon.IdPln</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">EMAIL</th>
                <td>@Content.ApprovalOpportunity.Pemohon.Email</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">NIK</th>
                <td>@Content.ApprovalOpportunity.Pemohon.Nik</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">NPWP</th>
                <td>@Content.ApprovalOpportunity.Pemohon.Npwp</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">ALAMAT</th>
                <td>@Content.ApprovalOpportunity.Pemohon.Alamat</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">NOMOR TELEPON</th>
                <td>@Content.ApprovalOpportunity.Pemohon.NomorTelepon</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">KETERANGAN</th>
                <td>@Content.ApprovalOpportunity.Pemohon.Keterangan</td>
            </tr>
        </thead>
    </table>

    <FluentLabel Typo="Typography.H3">Data Agen</FluentLabel>
    <table>
        <thead>
            <tr>
                <th style="padding-right: 1rem;">NAMA</th>
                <td>@Content.ApprovalOpportunity.Agen.NamaLengkap</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">EMAIL</th>
                <td>@Content.ApprovalOpportunity.Agen.Email</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">NOMOR TELEPON</th>
                <td>@Content.ApprovalOpportunity.Agen.NomorTelepon</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">MITRA</th>
                <td>@Content.ApprovalOpportunity.Agen.Mitra</td>
            </tr>
        </thead>
    </table>

    <FluentLabel Typo="Typography.H3">Data Wilayah</FluentLabel>
    <table>
        <thead>
            <tr>
                <th style="padding-right: 1rem;">REGIONAL</th>
                <td>@Content.ApprovalOpportunity.Regional.Bagian</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">KANTOR PERWAKILAN</th>
                <td>@Content.ApprovalOpportunity.Regional.KantorPerwakilan</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">PRONVINSI</th>
                <td>@Content.ApprovalOpportunity.Regional.Provinsi</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">KABUPATEN</th>
                <td>@Content.ApprovalOpportunity.Regional.Kabupaten</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">KECAMATAN</th>
                <td>@Content.ApprovalOpportunity.Regional.Kecamatan</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">KELURAHAN</th>
                <td>@Content.ApprovalOpportunity.Regional.Kecamatan</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">LATITUDE</th>
                <td>@Content.ApprovalOpportunity.Regional.Koordinat.Latitude</td>
            </tr>
            <tr>
                <th style="padding-right: 1rem;">LONGITUDE</th>
                <td>@Content.ApprovalOpportunity.Regional.Koordinat.Longitude</td>
            </tr>
        </thead>
    </table>
@code
{
    [Parameter]
    public WorkPaper Content { get; set; } = default!;

    [CascadingParameter]
    public FluentDialog Dialog { get; set; } = default!;

    private async Task SaveAsync()
    {
        await Dialog.CloseAsync(Content);
    }

    private async Task CancelAsync()
    {
        await Dialog.CancelAsync();
    }
}